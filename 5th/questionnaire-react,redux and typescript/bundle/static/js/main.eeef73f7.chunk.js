(this["webpackJsonptask50-react"]=this["webpackJsonptask50-react"]||[]).push([[0],{30:function(e,t,n){e.exports=n(46)},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),c=n.n(o);n(35),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(2),i=n(3),l=n(6),p=n(5),d=n(7),s=(n(36),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("span",null,"\u95ee\u5377"),r.a.createElement("ul",{className:"navigater"},r.a.createElement("li",{className:"navi-home"},r.a.createElement("a",{href:"#/home"},"\u9996\u9875")),r.a.createElement("li",{className:"navi-create"},r.a.createElement("a",{href:"#/create"},"\u95ee\u5377\u65b0\u5efa")),r.a.createElement("li",{className:"navi-fill"},r.a.createElement("a",{href:"#/fill"},"\u95ee\u5377\u586b\u5199")),r.a.createElement("li",{className:"navi-data"},r.a.createElement("a",{href:"#/data"},"\u95ee\u5377\u6570\u636e")),r.a.createElement("li",{className:"navi-list"},r.a.createElement("a",{href:"#/list"},"\u95ee\u5377\u5217\u8868"))))}),m=(n(37),function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"passage"},r.a.createElement("h1",null,"Welcome to visit here!"),r.a.createElement("p",null,"it is a questionnaire manager")))}),f=function(e){var t=e.id,n=e.state,a=e.name,o=e.editQue,c=e.scanData,u=e.fillQue;return r.a.createElement("tr",{"data-id":t},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox"})),r.a.createElement("td",null,r.a.createElement("span",null,a)),r.a.createElement("td",null,r.a.createElement("span",null,n)),"ready"===n?r.a.createElement("td",null,r.a.createElement("input",{className:"edit",type:"button",value:"\u7f16\u8f91",onClick:o}),r.a.createElement("input",{type:"button",value:"\u67e5\u770b",onClick:u})):r.a.createElement("td",null,r.a.createElement("input",{className:"edit",type:"button",value:"\u6570\u636e",onClick:c}),r.a.createElement("input",{type:"button",value:"\u67e5\u770b",onClick:u})))},h=(n(38),n(4)),v=function(){return{type:"Que/Change",id:Date.parse("".concat(new Date))}},y=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"list"},r.a.createElement("section",null,r.a.createElement("h1",null,"\u95ee\u5377\u5217\u8868"),r.a.createElement("table",{className:"queList"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u9009\u4e2d"),r.a.createElement("td",null,"\u95ee\u5377\u540d\u79f0"),r.a.createElement("td",null,"\u95ee\u5377\u72b6\u6001"),r.a.createElement("td",null,"\u529f\u80fd\u533a\u57df"))),r.a.createElement("tbody",null,this.props.data.map((function(t){return r.a.createElement(f,{key:t.id,id:t.id,state:t.state,name:t.name,editQue:function(){return e.props.editQue(t.id)},scanData:function(){return e.props.scanData(t.id)},fillQue:function(){return e.props.fillQue(t.id)}})}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{className:"selectAll",type:"checkbox",onChange:E}),"\u5168\u9009"),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("input",{type:"button",className:"deleteQue",value:"\u5220\u9664\u95ee\u5377",onClick:function(){document.querySelectorAll("tbody input:checked").forEach((function(t){var n=t.parentElement.parentElement.getAttribute("data-id");e.props.removeItem(Number(n))}))}})),r.a.createElement("td",null,r.a.createElement("input",{type:"button",className:"createQue",value:"\u65b0\u5efa\u95ee\u5377",onClick:this.props.newItem})))))))}}]),t}(a.Component),E=function(e){var t=document.getElementsByTagName("tbody")[0];e.target.checked?t.querySelectorAll("input[type=checkbox]").forEach((function(e){e.checked=!0})):t.querySelectorAll("input[type=checkbox]").forEach((function(e){e.checked=!1}))},I=Object(h.b)((function(e){return{data:e.data}}),(function(e){return{editQue:function(t){e(function(e){return{type:"Que/Change",id:e}}(t)),window.location.hash="/create"},scanData:function(t){e(function(e){return{type:"Que/Change",id:e}}(t)),window.location.hash="/data"},fillQue:function(t){e(function(e){return{type:"Que/Change",id:e}}(t)),window.location.hash="/fill"},newItem:function(){e(v()),window.location.hash="/create"},removeItem:function(t){e(function(e){return{type:"Item/Remove",id:e}}(t))}}}))(y),b=(n(43),function(e){var t=e.removeOpt,n=e.type,a=e.updateOpt,o=e.content;switch(n){case"single":return r.a.createElement("div",null,r.a.createElement("input",{type:"radio"}),r.a.createElement("input",{type:"text",placeholder:"\u9009\u9879\u5185\u5bb9",defaultValue:o,onChange:a}),r.a.createElement("input",{type:"button",value:"X",onClick:t}));case"multi":return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox"}),r.a.createElement("input",{type:"text",placeholder:"\u9009\u9879\u5185\u5bb9",defaultValue:o,onChange:a}),r.a.createElement("input",{type:"button",value:"X",onClick:t}));default:return r.a.createElement("div",null)}}),x=function(e,t,n){return{type:"Item/New",id:e,title:t,deadline:n}},O=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"updateOpt",value:function(e,t,n,a){return function(r){a(e,t,n,(null===r||void 0===r?void 0:r.target).value)}}},{key:"render",value:function(){var e=this;switch(this.props.type){case"single":return r.a.createElement("li",{"data-id":"single"},r.a.createElement("p",null,"Q",this.props.index+1,"\u5355\u9009\u9898"),r.a.createElement("input",{type:"text",placeholder:"\u9898\u76ee\u5185\u5bb9",defaultValue:this.props.item.question,onChange:this.props.updateQue}),g(this.props.opt,this.props.parId,this.props.index).map((function(t,n){return r.a.createElement(b,{key:e.props.parId+"-"+e.props.index+"-"+n,type:e.props.type,content:t.content,removeOpt:function(){return e.props.removeOpt(e.props.index,e.props.parId,n)},updateOpt:e.updateOpt(e.props.index,e.props.parId,n,e.props.updateOpt)})})),r.a.createElement("div",{"data-id":"addOpt",className:"addOpt",onClick:function(){return e.props.addOpt(e.props.index,e.props.parId)}},"Add Option"),r.a.createElement("div",{className:"create-controller"},r.a.createElement("span",{className:"controller-up",onClick:function(){e.props.upQue(e.props.index,e.props.parId),e.props.upOpt(e.props.index,e.props.parId)}},"\u4e0a\u79fb"),r.a.createElement("span",{className:"controller-down",onClick:function(){e.props.downQue(e.props.index,e.props.parId),e.props.downOpt(e.props.index,e.props.parId)}},"\u4e0b\u79fb"),r.a.createElement("span",{className:"controller-copy",onClick:function(){return e.props.copyQue(e.props.index,e.props.parId)}},"\u590d\u7528"),r.a.createElement("span",{className:"controller-delete",onClick:function(){return e.props.removeQue(e.props.index,e.props.parId)}},"\u5220\u9664")));case"multi":return r.a.createElement("li",{"data-id":"multi"},r.a.createElement("p",null,"Q",this.props.index+1,"\u591a\u9009\u9898"),r.a.createElement("input",{type:"text",placeholder:"\u9898\u76ee\u5185\u5bb9",defaultValue:this.props.item.question,onChange:this.props.updateQue}),g(this.props.opt,this.props.parId,this.props.index).map((function(t,n){return r.a.createElement(b,{key:e.props.parId+"-"+e.props.index+"-"+n,type:e.props.type,content:t.content,removeOpt:function(){return e.props.removeOpt(e.props.index,e.props.parId,n)},updateOpt:e.updateOpt(e.props.index,e.props.parId,n,e.props.updateOpt)})})),r.a.createElement("div",{"data-id":"addOpt",className:"addOpt",onClick:function(){return e.props.addOpt(e.props.index,e.props.parId)}},"Add Option"),r.a.createElement("div",{className:"create-controller"},r.a.createElement("span",{className:"controller-up",onClick:function(){e.props.upQue(e.props.index,e.props.parId),e.props.upOpt(e.props.index,e.props.parId)}},"\u4e0a\u79fb"),r.a.createElement("span",{className:"controller-down",onClick:function(){e.props.downQue(e.props.index,e.props.parId),e.props.downOpt(e.props.index,e.props.parId)}},"\u4e0b\u79fb"),r.a.createElement("span",{className:"controller-copy",onClick:function(){return e.props.copyQue(e.props.index,e.props.parId)}},"\u590d\u7528"),r.a.createElement("span",{className:"controller-delete",onClick:function(){return e.props.removeQue(e.props.index,e.props.parId)}},"\u5220\u9664")));case"word":return r.a.createElement("li",{"data-id":"word"},r.a.createElement("p",null,"Q",this.props.index+1,"\u6587\u5b57\u9898"),r.a.createElement("input",{type:"text",placeholder:"\u9898\u76ee\u5185\u5bb9",defaultValue:this.props.item.question,onChange:this.props.updateQue}),r.a.createElement("textarea",{name:"",id:"",cols:30,rows:10,placeholder:"\u56de\u7b54\u5185\u5bb9"}),r.a.createElement("span",null,r.a.createElement("p",null,r.a.createElement("input",{type:"checkbox"}),"\u6b64\u9879\u5fc5\u586b")),r.a.createElement("div",{className:"create-controller"},r.a.createElement("span",{className:"controller-up",onClick:function(){e.props.upQue(e.props.index,e.props.parId),e.props.upOpt(e.props.index,e.props.parId)}},"\u4e0a\u79fb"),r.a.createElement("span",{className:"controller-down",onClick:function(){e.props.downQue(e.props.index,e.props.parId),e.props.downOpt(e.props.index,e.props.parId)}},"\u4e0b\u79fb"),r.a.createElement("span",{className:"controller-copy",onClick:function(){return e.props.copyQue(e.props.index,e.props.parId)}},"\u590d\u7528"),r.a.createElement("span",{className:"controller-delete",onClick:function(){return e.props.removeQue(e.props.index,e.props.parId)}},"\u5220\u9664")))}}}]),t}(a.Component),g=function(e,t,n){return e.filter((function(e){return e.parId===t&&e.order===n}))},w=Object(h.b)((function(e){return{opt:e.opt,que:e.que}}),(function(e){return{removeOpt:function(t,n,a){e(function(e,t,n){return{type:"Opt/Remove",parIndex:e,parentId:t,index:n}}(t,n,a))},addOpt:function(t,n){e(function(e,t){return{type:"Opt/Add",parIndex:e,parentId:t}}(t,n))},upOpt:function(t,n){e(function(e,t){return{type:"Opt/Up",parIndex:e,parentId:t}}(t,n))},downOpt:function(t,n){e(function(e,t){return{type:"Opt/Down",parIndex:e,parentId:t}}(t,n))},updateOpt:function(t,n,a,r){e(function(e,t,n,a){return{type:"Opt/Update",parIndex:e,parentId:t,index:n,content:a}}(t,n,a,r))}}}))(O),Q=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4?arguments[4]:void 0;Object(u.a)(this,e),this.year=t,this.month=n+1,this.day=a,this.num=r,this.obj=o,this.selectedDay=[],this.init()}return Object(i.a)(e,[{key:"init",value:function(){var e=document.querySelector(".calendar"),t=document.querySelector(".calendarTable");t.style.display="none";var n=document.querySelector(".date");n.value="".concat(this.year,"-").concat(this.month,"-").concat(this.day),this.set(t),this.listener(e,t,n)}},{key:"set",value:function(e){var t=document.createElement("div");t.setAttribute("id","select"),e.appendChild(t);var n=document.createElement("table");n.setAttribute("id","table"),e.appendChild(n)}},{key:"select",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=document.querySelector("#select"),c=document.createElement("select");c.setAttribute("id","selectYear");var u=document.createElement("select");u.setAttribute("id","selectMonth");var i=document.createElement("select");i.setAttribute("id","selectDay");for(var l=document.querySelector(".date"),p=document.querySelector(".calendarTable"),d=e%4===0,s=[31,d?29:28,31,30,31,30,31,31,30,31,30,31],m=-r;m<r;m++){var f=document.createElement("option");m+2019===1*e&&f.setAttribute("selected","selected"),f.setAttribute("value","".concat(2019+m)),f.innerHTML=2019+m,c.appendChild(f)}for(var h=1;h<=12;h++){f=document.createElement("option");h===1*t&&f.setAttribute("selected","selected"),f.setAttribute("value","".concat(h)),f.innerHTML=h,u.appendChild(f)}for(var v=1;v<=s[t-1];v++){f=document.createElement("option");v===1*n&&f.setAttribute("selected","selected"),f.setAttribute("value","".concat(v)),f.innerHTML=v,i.appendChild(f)}c.onchange=function(){var e=document.querySelector("#selectMonth"),t=document.querySelector("#selectDay");a.select(c.value,e.value,t.value),l.value="".concat(c.value,"-").concat(e.value,"-").concat(t.value),a.render(c.value,e.value,t.value),a.updateDate(c.value,e.value,t.value)},u.onchange=function(){var e=document.querySelector("#selectYear"),t=document.querySelector("#selectDay");a.select(e.value,u.value,t.value),l.value="".concat(e.value,"-").concat(u.value,"-").concat(t.value),a.render(e.value,u.value,t.value),a.updateDate(e.value,u.value,t.value)},i.onchange=function(){var e=document.querySelector("#selectYear"),t=document.querySelector("#selectMonth");l.value="".concat(e.value,"-").concat(t.value,"-").concat(i.value),a.render(e.value,t.value,i.value),p.style.display="none",a.updateDate(e.value,t.value,i.value)},o.innerHTML="",o.appendChild(c),o.appendChild(u),o.appendChild(i)}},{key:"render",value:function(e,t,n){e=Number(e),t=Number(t),n=Number(n);var a=new Date(e,t-1,1),r=document.querySelector("#table");r.classList.add("calendar"),r.innerHTML="\n            <thead>\n                <td>\u65e5</td>\n                <td>\u4e00</td>\n                <td>\u4e8c</td>\n                <td>\u4e09</td>\n                <td>\u56db</td>\n                <td>\u4e94</td>\n                <td>\u516d</td>\n            </thead>\n        ",t--;for(var o=[31,e%4===0?29:28,31,30,31,30,31,31,30,31,30,31],c=a.getDay(),u=Math.ceil((c+o[t])/7),i=0;i<u;i++){for(var l=document.createElement("tr"),p=0;p<7;p++){var d=document.createElement("td");this.point(d);var s=7*i+p-c+1;if(s>0&&s<=o[t]){var m=[e,t+1,s];this.compareDate(m,this.selectedDay)&&d.classList.add("selected"),d.innerHTML=s,s===n&&(d.style.backgroundColor="red")}else s<=0?(d.innerHTML=o[0===t?11:t-1]+s,d.style.opacity="0.3"):s>o[t]&&(d.innerHTML=s-o[t],d.style.opacity="0.3");l.appendChild(d)}r.appendChild(l)}}},{key:"listener",value:function(e,t,n){var a=this;n.onmousedown=function(){if(""!==n.value){var e=n.value.match(/\d{4}-\d{1,2}-\d{1,2}/);if(e){var r=e[0].split("-");a.select(r[0],r[1],r[2]),a.render(r[0],r[1],r[2])}}"none"===t.style.display?t.style.display="block":t.style.display="none"},n.oninput=function(){if(""!==n.value){var e=n.value.match(/\d{4}-\d{1,2}-\d{1,2}/);if(e){var t=e[0].split("-");a.select(t[0],t[1],t[2]),a.render(t[0],t[1],t[2])}}}}},{key:"point",value:function(e){var t=this;e.onclick=function(n){if("0.3"===n.target.style.opacity||isNaN(parseInt(n.target.innerHTML)))return!1;var a=document.querySelectorAll(".selected");if(0===t.selectedDay.length||t.selectedDay.length>1)t.selectedDay=[],a.forEach((function(e){e.classList.remove("selected")})),e.classList.add("selected"),(r=t.getDate()).splice(2,1,+e.innerHTML),t.selectedDay.push(r);else if(1===t.selectedDay.length){var r;e.classList.add("selected"),(r=t.getDate()).splice(2,1,+e.innerHTML),t.selectedDay.push(r),t.selectedDay=t.sortArray(t.selectedDay),t.render(t.year,t.month,t.day),document.querySelector(".date").value="".concat(t.selectedDay[0][0],"-").concat(t.selectedDay[0][1],"-").concat(t.selectedDay[0][2],"\u81f3").concat(t.selectedDay[1][0],"-").concat(t.selectedDay[1][1],"-").concat(t.selectedDay[1][2])}console.log(t.selectedDay)}}},{key:"updateDate",value:function(e,t,n){this.year=e,this.month=t,this.day=n}},{key:"getDate",value:function(){return[this.year,this.month,this.day]}},{key:"sortArray",value:function(e){return e.sort((function(e,t){return e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2]}))}},{key:"compareDate",value:function(e,t){if(t.length<=1)return!1;var n=e.map((function(e){return 1==="".concat(e).length?e="0"+e:e})),a=t[0].map((function(e){return 1==="".concat(e).length?e="0"+e:e})),r=t[1].map((function(e){return 1==="".concat(e).length?e="0"+e:e})),o="".concat(n[0]).concat(n[1]).concat(n[2]),c="".concat(a[0]).concat(a[1]).concat(a[2]),u="".concat(r[0]).concat(r[1]).concat(r[2]);return+o>=+c&&+o<=+u}}]),e}(),k="",C="",N=function(e){k=(null===e||void 0===e?void 0:e.target).value},D=function(e){C=(null===e||void 0===e?void 0:e.target).value},j=window,q=function(e,t){var n=[];return e.forEach((function(e){null!==t&&e.parId===t&&n.push(e)})),n.sort((function(e,t){return e.order-t.order})),n},S=function(){var e=new Date;new Q(e.getFullYear(),e.getMonth(),e.getDate())},A=function(e,t,n){return function(a){n(e,t,(null===a||void 0===a?void 0:a.target).value)}},T=Object(h.b)((function(e){return{que:e.que,nowQueId:e.nowQueId}}),(function(e){return{addQue:function(t,n){e(function(e,t){return{type:"Que/Add",queType:e,parentId:t}}(t,n))},removeQue:function(t,n){e(function(e,t){return{type:"Que/Remove",index:e,parentId:t}}(t,n)),e(function(e,t){return{type:"Que/JustOrder",index:e,id:t}}(t,n))},upQue:function(t,n){e(function(e,t){return{type:"Que/Up",index:e,parentId:t}}(t,n))},downQue:function(t,n){e(function(e,t){return{type:"Que/Down",index:e,parentId:t}}(t,n))},copyQue:function(t,n){e(function(e,t){return{type:"Que/Copy",index:e,parentId:t}}(t,n))},saveQue:function(t,n,a){e(x(t,n,a)),e(function(e){return{type:"Que/Save",id:e}}(t))},submitQue:function(t,n,a){e(x(t,n,a)),e(function(e){return{type:"Que/Submit",id:e}}(t))},clearQue:function(){e({type:"Que/Change",id:null})},updateQue:function(t,n,a){e(function(e,t,n){return{type:"Que/Update",id:e,index:t,content:n}}(t,n,a))},newItem:function(){e(v())}}}))((function(e){var t=e.que,n=e.nowQueId,a=e.addQue,o=e.removeQue,c=e.upQue,u=e.downQue,i=e.copyQue,l=e.saveQue,p=e.submitQue,d=e.clearQue,s=e.updateQue,m=e.newItem;return 0===n?r.a.createElement("div",{className:"create"},r.a.createElement("div",{className:"create-2"},r.a.createElement("p",null,"\u70b9\u51fb\u6309\u94ae\u65b0\u5efa\u95ee\u5377"),r.a.createElement("input",{type:"button",value:"\u65b0\u5efa\u95ee\u5377",onClick:m}))):r.a.createElement("div",{className:"create"},r.a.createElement("div",{className:"create-1"},r.a.createElement("div",{className:"create-title"},r.a.createElement("input",{type:"text",placeholder:"\u95ee\u5377\u6807\u9898",onChange:N})),r.a.createElement("div",{className:"queAll"},r.a.createElement("ul",{"data-id":n},q(t,n).map((function(e,t){return r.a.createElement(w,{key:e.parId+"-"+t,index:t,type:e.type,parId:e.parId,addQue:a,removeQue:o,upQue:c,downQue:u,copyQue:i,item:e,updateQue:A(e.parId,t,s)})})))),r.a.createElement("div",{className:"create-add"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return a("single",n)}},"\u5355\u9009\u9898"),r.a.createElement("li",{onClick:function(){return a("multi",n)}},"\u591a\u9009\u9898"),r.a.createElement("li",{onClick:function(){return a("word",n)}},"\u6587\u5b57\u9898"))),r.a.createElement("div",{className:"create-foot"},r.a.createElement("div",{className:"calendar"},"\u95ee\u5377\u622a\u6b62\u65e5\u671f",r.a.createElement("input",{className:"date",type:"text",placeholder:"\u70b9\u51fb\u51fa\u73b0\u65e5\u5386",onFocus:S,onChange:D}),r.a.createElement("div",{className:"calendarTable"})),r.a.createElement("div",null,r.a.createElement("input",{type:"button",value:"\u4fdd\u5b58\u95ee\u5377",onClick:function(){l(n,k,C),j.location.hash="/list",d()}}),r.a.createElement("input",{type:"button",value:"\u53d1\u5e03\u95ee\u5377",onClick:function(){p(n,k,C),j.location.hash="/list",d()}})))))})),M=n(12),L=n(16),J=function(e){var t=e.item,n=e.changeOpt;switch(e.type){case"single":return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("input",{type:"radio",value:t.index+1,name:"0",onChange:n}),t.content||"\u672a\u586b\u5199\u9009\u9879\u5185\u5bb9"));case"multi":return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("input",{type:"checkbox",value:t.index+1,name:"0",onChange:n}),t.content||"\u672a\u586b\u5199\u9009\u9879\u5185\u5bb9"));default:return r.a.createElement("div",null)}},H=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).data=void 0,n.word=void 0,n.count=void 0,n.data=[],n.word={},n.count=[],n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"saveOptData",value:function(e,t,n,a){if("publish"===a)return function(a){var r,o={parId:t,order:e,index:n,count:0};(null===a||void 0===a?void 0:a.target).checked?o.count+=1:o.count=0===o.count?0:o.count-1;var c=this.data.findIndex((function(a){return a.parId===t&&a.order===e&&a.index===n}));-1!==c?this.data[c]=o:this.data.push(o),(r=this.props).getData.apply(r,Object(L.a)(this.data)),-1===this.count.findIndex((function(n){return n.parId===t&&n.order===e}))&&this.count.push({parId:t,order:e})}.bind(this)}},{key:"saveWordData",value:function(e,t,n,a){if("publish"===n)return function(n){if(a&&!(null===n||void 0===n?void 0:n.target).value)console.log("\u6b64\u9898\u5fc5\u586b"),this.props.mustCheck(!1);else{var r={parId:e,order:t,type:"word",answer:(null===n||void 0===n?void 0:n.target).value};this.word=r,this.props.getData(this.word)}}.bind(this)}},{key:"changeOption",value:function(e,t,n,a,r){if("publish"===r)return function(r){(null===r||void 0===r?void 0:r.target).checked?a(e,t,n,1):a(e,t,n,-1)}}},{key:"updateWordAnswer",value:function(e,t,n,a){if("publish"===a)return function(a){n(e,t,(null===a||void 0===a?void 0:a.target).value)}}},{key:"render",value:function(){var e=this;switch(this.props.item.type){case"single":return r.a.createElement("li",{"data-id":"single"},r.a.createElement("p",null,"Q",this.props.index+1,"\u5355\u9009\u9898"),r.a.createElement("p",null,this.props.item.question||"\u672a\u586b\u5199\u95ee\u9898"),U(this.props.opt,this.props.item.parId,this.props.index).map((function(t,n){return r.a.createElement(J,{key:e.props.item.parId+"-"+e.props.item.order+"-"+n,item:t,type:e.props.item.type,changeOpt:e.saveOptData(e.props.index,e.props.item.parId,n,e.props.queType)})})));case"multi":return r.a.createElement("li",{"data-id":"multi"},r.a.createElement("p",null,"Q",this.props.index+1,"\u591a\u9009\u9898"),r.a.createElement("p",null,this.props.question),U(this.props.opt,this.props.item.parId,this.props.index).map((function(t,n){return r.a.createElement(J,{item:t,type:e.props.item.type,changeOpt:e.saveOptData(e.props.index,e.props.item.parId,n,e.props.queType)})})));case"word":return r.a.createElement("li",{"data-id":"word"},r.a.createElement("p",null,"Q",this.props.index+1,"\u6587\u5b57\u9898"),r.a.createElement("p",null,this.props.item.question),r.a.createElement("span",null,this.props.item.must?"\u6b64\u9879\u5fc5\u586b":"\u6b64\u9879\u9009\u586b"),r.a.createElement("textarea",{name:"",id:"",cols:30,rows:10,placeholder:"\u56de\u7b54\u5185\u5bb9",onChange:this.saveWordData(this.props.item.parId,this.props.index,this.props.queType,this.props.must)}));default:return r.a.createElement("div",null)}}}]),t}(a.Component),U=function(e,t,n){return e.filter((function(e){return e.parId===t&&e.order===n}))},R=Object(h.b)((function(e){return{opt:e.opt}}),(function(e){return{changeOpt:function(t,n,a,r){e(function(e,t,n,a){return{type:"Opt/Submit",parIndex:e,parentId:t,index:n,number:a}}(t,n,a,r))},updateWord:function(t,n,a){e(function(e,t,n){return{type:"Que/UpdateWord",id:e,index:t,answer:n}}(t,n,a))}}}))(H),W=(n(44),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).optData=void 0,n.queData=void 0,n.bool=void 0,n.optData=[],n.queData=[],n.bool=!0,n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"mustCheck",value:function(e){this.bool=e}},{key:"getCompoData",value:function(){return function(){for(var e=this.optData,t=this.queData,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var o=function(){var n=u[c];if(n.type){var a=t.findIndex((function(e){return e.parId===n.parId&&e.order===n.order}));-1!==a?t[a]=n:t.push(n)}else{var r=e.findIndex((function(e){return e.parId===n.parId&&e.order===n.order&&e.index===n.index}));-1!==r?e[r]=n:e.push(n)}},c=0,u=a;c<u.length;c++)o();this.optData=e,this.queData=t}.bind(this)}},{key:"filterQue",value:function(e,t){var n=[];return e.forEach((function(e){null!==t&&e.parId===t&&n.push(e)})),n.sort((function(e,t){return e.order-t.order})),n}},{key:"getQueState",value:function(e,t){var n="";return e.forEach((function(e){e.id===t&&(n=e.state)})),n}},{key:"render",value:function(){var e=this;return 0===this.props.nowQueId?r.a.createElement("div",{className:"fill"},r.a.createElement("div",{className:"fill-1"},"\u8bf7\u9009\u62e9\u8981\u586b\u5199\u7684\u95ee\u5377")):r.a.createElement("div",{className:"fill"},r.a.createElement("div",{className:"fill-1"},r.a.createElement("div",{className:"fill-title"},r.a.createElement("p",null,"\u95ee\u5377\u6807\u9898")),r.a.createElement("div",{className:"queFill"},r.a.createElement("ul",null,this.filterQue(this.props.que,this.props.nowQueId).map((function(t,n){return r.a.createElement(R,{getData:e.getCompoData(),queType:e.getQueState(e.props.data,e.props.nowQueId),key:e.props.nowQueId+"-"+n,item:t,index:n,mustCheck:e.mustCheck})})))),r.a.createElement("div",{className:"fill-foot"},r.a.createElement("input",{type:"button",value:"\u63d0\u4ea4\u95ee\u5377",onClick:function(){e.props.submitQue(e.props.data,e.props.nowQueId,e.queData,e.optData,e.bool)}}))))}}]),t}(a.Component)),F=Object(h.b)((function(e){return{data:e.data,que:e.que,nowQueId:e.nowQueId}}),(function(e){return{submitQue:function(t,n,a,r,o){t.forEach((function(t){t.id===n&&("publish"===t.state?o?(e({type:"Que/Change",id:null}),a.forEach((function(t){e(function(e,t,n){return{type:"Que/Fill",id:e,index:t,answer:n}}(t.parId,t.order,t.answer))})),e(function(e){return{type:"DataCount/Add",id:e}}(n)),r.forEach((function(t){e(function(e,t,n,a){return{type:"Opt/Fill",id:e,order:t,index:n,count:a}}(t.parId,t.order,t.index,t.count))}))):console.log("\u95ee\u5377\u5fc5\u586b\u5185\u5bb9\u7a7a\u7f3a\uff0c\u63d0\u4ea4\u65e0\u6548"):console.log("\u95ee\u5377\u4e0d\u4e3a\u53d1\u5e03\u72b6\u6001\uff0c\u63d0\u4ea4\u65e0\u6548"))})),window.location.hash="/list"}}}))(W),V=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"drawLine",value:function(e,t,n,a,r){e.beginPath(),e.moveTo(t,n),e.lineTo(a,r),e.strokeStyle="black",e.stroke()}},{key:"drawMarker",value:function(e,t){if(t){var n=500/(+Object.keys(t).length+1),a=1;for(var r in t)e.fillText(r,n*a+50,290,50),a++}else e.fillText("100%",10,50,40),e.fillText("75%",10,105,40),e.fillText("50%",10,160,40),e.fillText("25%",10,215,40),e.fillText("0",20,270,40)}},{key:"drawRect",value:function(e,t,n){var a=500/(+Object.keys(t).length+1),r=1;for(var o in t)e.fillStyle="red",e.fillRect(a*r+25,50+220*(1-t[o]/n),50,220*t[o]/n),r++}},{key:"render",value:function(){return r.a.createElement("canvas",{id:this.props.que.parId+"-"+this.props.que.order})}},{key:"componentDidMount",value:function(){var e=document.getElementById(this.props.que.parId+"-"+this.props.que.order),t=e.getContext("2d");if(e.width=600,e.height=300,this.drawLine(t,50,50,50,270),this.drawLine(t,50,270,550,270),this.drawMarker(t,null),"word"===this.props.type){var n={answer:this.props.que.answer.length};this.drawMarker(t,n),this.drawRect(t,n,this.props.count)}else{var a={};this.props.opt.forEach((function(e){a[e.index+1]=e.count})),this.drawMarker(t,a),this.drawRect(t,a,this.props.count)}}}]),t}(a.Component),B=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"selectOpt",value:function(e,t,n){var a=[];return e.forEach((function(e){e.parId===t&&e.order===n&&a.push(e)})),a}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Q",this.props.index+1,"single"==this.props.item.type?"\u5355\u9009\u9898":"multi"==this.props.item.type?"\u591a\u9009\u9898":"\u6587\u5b57\u9898"),r.a.createElement("p",null,"\u8be5\u95ee\u9898\u603b\u63d0\u4ea4\u6b21\u6570\u4e3a",this.props.count,"\u6b21"),r.a.createElement(V,{type:this.props.item.type,opt:this.selectOpt(this.props.opt,this.props.item.parId,this.props.item.order),que:this.props.item,count:this.props.count}))}}]),t}(a.Component),Y=Object(h.b)((function(e){return{opt:e.opt}}))(B),X=(n(45),function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"selectData",value:function(e,t){var n={};return e.forEach((function(e){e.id===t&&(n=e)})),n}},{key:"selectQue",value:function(e,t){var n=[];return t.forEach((function(t){t.parId===e&&n.push(t)})),n.sort((function(e,t){return e.order-t.order})),n}},{key:"render",value:function(){var e=this;return 0===this.props.nowQueId?r.a.createElement("div",{className:"data"},r.a.createElement("div",{className:"data-1"},"\u8bf7\u9009\u62e9\u8981\u67e5\u770b\u6570\u636e\u7684\u9875\u9762")):r.a.createElement("div",{className:"data"},r.a.createElement("div",{className:"data-1"},r.a.createElement("div",{className:"data-title"},r.a.createElement("p",null,this.props.data.name),r.a.createElement("span",null,"\u95ee\u5377\u603b\u63d0\u4ea4\u6b21\u6570\uff1a",this.props.data.submit," \u622a\u6b62\u65e5\u671f\uff1a",this.props.data.deadline)),r.a.createElement("div",{className:"queData"},this.selectQue(this.props.nowQueId,this.props.que).map((function(t,n){return r.a.createElement(Y,{key:e.props.nowQueId+"data"+n,item:t,index:n,count:e.props.data.submit})}))),r.a.createElement("div",{className:"data-foot"},r.a.createElement("input",{type:"button",value:"\u8fd4\u56de",onClick:function(){return e.props.back()}}))))}}]),t}(a.Component)),P=Object(h.b)((function(e){return{data:X.prototype.selectData(e.data,e.nowQueId),que:e.que,nowQueId:e.nowQueId}}),(function(e){return{back:function(){window.location.hash="/list",e({type:"Que/Change",id:null})}}}))(X),$=n(28),z=n(15),G=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement($.a,null,r.a.createElement(z.a,{path:"/",component:m,exact:!0}),r.a.createElement(z.a,{path:"/home",component:m}),r.a.createElement(z.a,{path:"/create",component:T}),r.a.createElement(z.a,{path:"/list",component:I}),r.a.createElement(z.a,{path:"/fill",component:F}),r.a.createElement(z.a,{path:"/data",component:P})))}},{key:"componentDidMount",value:function(){localStorage.setItem("state",JSON.stringify(this.props.prop))}},{key:"componentDidUpdate",value:function(){localStorage.setItem("state",JSON.stringify(this.props.prop))}}]),t}(a.Component),K=Object(h.b)((function(e){return{prop:e}}))(G),Z=n(18),_=Object(Z.b)({que:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Que/Add":var n=0;return e.map((function(e){e.parId===t.parentId&&n++})),n>=10?(console.log("\u95ee\u9898\u6700\u591a\u5341\u4e2a"),!1):[].concat(Object(L.a)(e),[{parId:t.parentId,order:n,type:t.queType,question:"",must:!0,submitCount:0,answer:""}]);case"Que/Remove":return e.filter((function(e){return e.parId!==t.parentId||e.order!==t.index}));case"Que/Up":var a=JSON.parse(JSON.stringify(e)),r={},o={};return 0===t.index?(console.log("\u4e0a\u9762\u6ca1\u4e86"),a):(a.forEach((function(e,n){e.parId===t.parentId&&e.order===t.index&&(r=a[n]),e.parId===t.parentId&&e.order===t.index-1&&(o=a[n])})),r.order--,o.order++,a.forEach((function(e){e.parId===t.parentId&&e.order===t.index&&(e=r)})),a.forEach((function(e){e.parId===t.parentId&&e.order===t.index-1&&(e=o)})),a);case"Que/Down":var c=JSON.parse(JSON.stringify(e)),u={},i={};return t.index===c.length-1?(console.log("\u4e0b\u9762\u6ca1\u4e86"),c):(c.forEach((function(e,n){e.parId===t.parentId&&e.order===t.index&&(u=c[n]),e.parId===t.parentId&&e.order===t.index+1&&(i=c[n])})),u.order++,i.order--,c.forEach((function(e){e.parId===t.parentId&&e.order===t.index&&(e=u)})),c.forEach((function(e){e.parId===t.parentId&&e.order===t.index+1&&(e=i)})),c);case"Que/Copy":var l=JSON.parse(JSON.stringify(e)),p={};return 10===l.length?(console.log("\u95ee\u9898\u6700\u591a\u5341\u4e2a"),l):(l.forEach((function(e){e.parId===t.parentId&&e.order===t.index&&(p=e)})),p.order=l.length,l.push(p),l);case"Que/Update":return e.map((function(e){return e.parId===t.id&&e.order===t.index?Object(M.a)({},e,{question:t.content}):e}));case"Que/UpdateWord":return e.map((function(e){return e.parId===t.id&&e.order===t.index?Object(M.a)({},e,{answer:t.answer}):e}));case"Que/Fill":return e.map((function(e){return e.parId===t.id&&e.order===t.index?Object(M.a)({},e,{answer:[].concat(Object(L.a)(e.answer),[t.answer])}):e}));case"Que/JustOrder":return e.map((function(e){return e.parId===t.id&&e.order>t.index?Object(M.a)({},e,{order:e.order-1}):e}));default:return e}},opt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Opt/Add":var n=0;return e.forEach((function(e){e.parId===t.parentId&&e.order===t.parIndex&&n++})),4===n?e:[].concat(Object(L.a)(e),[{parId:t.parentId,order:t.parIndex,index:n,content:"",answer:""}]);case"Opt/Remove":var a=e.filter((function(e){return e.parId!==t.parentId||e.order!==t.parIndex||e.index!==t.index}));return a.forEach((function(e){e.parId===t.parentId&&e.order===t.parIndex&&e.index>=t.index&&e.index--})),a;case"Opt/Up":var r=[],o=[],c=e.filter((function(e){return e.parId===t.parentId&&e.order===t.parIndex?(r.push(e),!1):e.parId!==t.parentId||e.order!==t.parIndex-1||(o.push(e),!1)}));return r.forEach((function(e){e.order--})),o.forEach((function(e){e.order++})),c.push.apply(c,r.concat(o)),c;case"Opt/Down":var u=[],i=[],l=e.filter((function(e){return e.parId===t.parentId&&e.order===t.parIndex?(u.push(e),!1):e.parId!==t.parentId||e.order!==t.parIndex+1||(i.push(e),!1)}));return u.forEach((function(e){e.order++})),i.forEach((function(e){e.order--})),l.push.apply(l,u.concat(i)),l;case"Opt/Update":return e.map((function(e){return e.parId===t.parentId&&e.order===t.parIndex&&e.index===t.index?Object(M.a)({},e,{content:t.content}):e}));case"Opt/Submit":return e.map((function(e){return e.parId===t.parentId&&e.order===t.parIndex&&e.index===t.index?e.count+t.number<0?e:Object(M.a)({},e,{count:e.count+t.number}):e}));case"Opt/Fill":return e.map((function(e){return e.parId===t.id&&e.order===t.order&&e.index===t.index?Object(M.a)({},e,{count:e.count+t.count}):e}));default:return e}},nowQueId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Que/Change":return t.id;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Que/Save":return e.map((function(e){return e.id===t.id?Object(M.a)({},e,{state:"ready"}):e}));case"Que/Submit":return e.map((function(e){return e.id===t.id?Object(M.a)({},e,{state:"publish"}):e}));case"Item/Remove":return e.filter((function(e){return e.id!==t.id}));case"Item/New":return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(L.a)(e),[{id:t.id,state:"done",name:t.title,deadline:t.deadline,submit:0}]);case"DataCount/Add":return e.map((function(e){return e.id===t.id?Object(M.a)({},e,{submit:e.submit+1}):e}));default:return e}}}),ee=JSON.parse(localStorage.getItem("state"))||{data:[{id:1,state:"publish",name:"example",deadline:"2019-12-31",submit:4}],que:[{parId:1,order:0,type:"single",question:"",must:!0,submitCount:0,answer:[]},{parId:1,order:1,type:"word",question:"",must:!0,submitCount:0,answer:["123","222","1",""]}],opt:[{parId:1,order:0,index:0,content:"",count:2},{parId:1,order:0,index:1,content:"",count:2}],nowQueId:0},te=Object(Z.c)(_,ee);c.a.render(r.a.createElement(h.a,{store:te},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.eeef73f7.chunk.js.map