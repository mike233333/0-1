(this.webpackJsonpquestionnaire=this.webpackJsonpquestionnaire||[]).push([[0],{177:function(e,t,a){e.exports=a(306)},182:function(e,t,a){},183:function(e,t,a){},240:function(e,t,a){},243:function(e,t,a){},272:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},306:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c);a(182),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(183);var u=a(314);window.addEventListener("hashchange",(function(){switch(window.location.hash){case"#/home":document.getElementsByClassName("menuSelect")[0].click();break;case"#/create":document.getElementsByClassName("menuSelect")[1].click();break;case"#/fill":document.getElementsByClassName("menuSelect")[2].click();break;case"#/data":document.getElementsByClassName("menuSelect")[3].click();break;case"#/list":document.getElementsByClassName("menuSelect")[4].click()}}));var i=function(){return r.a.createElement(u.a,{mode:"horizontal",className:"headerMenu"},r.a.createElement(u.a.Item,{className:"menuSelect",onClick:function(){window.location.hash="/home"}},"\u9996\u9875"),r.a.createElement(u.a.Item,{className:"menuSelect",onClick:function(){window.location.hash="/create"}},"\u95ee\u5377\u65b0\u5efa"),r.a.createElement(u.a.Item,{className:"menuSelect"},"\u95ee\u5377\u586b\u5199"),r.a.createElement(u.a.Item,{className:"menuSelect"},"\u95ee\u5377\u6570\u636e"),r.a.createElement(u.a.Item,{className:"menuSelect",onClick:function(){window.location.hash="/list"}},"\u95ee\u5377\u5217\u8868"))},l=(a(240),function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"passage"},r.a.createElement("h1",null,"Welcome to visit here!"),r.a.createElement("p",null,"it is a questionnaire manager")))}),d=a(11),s=a(91),p=a(17),m=a(309),f=a(310),h=a(318),E=a(78),v=function(e){var t=e.id,a=e.state,n=e.name,c=e.editQue,o=e.scanData,u=e.fillQue,i=e.checked,l=e.changeChecked,d=e.list,s=e.changeList;return r.a.createElement(m.a,{"data-id":t},r.a.createElement(f.a,{span:4},r.a.createElement(h.a,{onChange:function(e){return e.target.checked?(l(i+1),s([].concat(Object(p.a)(d),[t]))):(l(i-1),s(d.filter((function(e){return e!==t}))))}})),r.a.createElement(f.a,{span:6},n),r.a.createElement(f.a,{span:6},a),r.a.createElement(f.a,{span:8},"ready"===a?r.a.createElement("div",null,r.a.createElement(E.a,{onClick:c},"\u7f16\u8f91")):"publish"===a?r.a.createElement("div",null,r.a.createElement(E.a,{onClick:o},"\u6570\u636e"),r.a.createElement(E.a,{onClick:u},"\u586b\u5199")):r.a.createElement("div",null,r.a.createElement(E.a,{onClick:o},"\u6570\u636e"))))},I=(a(243),function(){return{type:"Que/Change",id:Date.parse("".concat(new Date))}}),b=a(313),y=a(316),w=a(22),g=JSON.parse(localStorage.getItem("questionnaire-state")),O=!1;for(var x in g)("data"!==x&&"que"!==x&&"opt"!==x||!g[x])&&(O=!0);var C=O?JSON.parse(localStorage.getItem("questionnaire-state")):{data:[{id:1,state:"publish",name:"example",deadline:"2020-12-31",submit:4}],que:[{parId:1,order:0,type:"single",question:"",must:!0,submitCount:0,answer:[]},{parId:1,order:1,type:"word",question:"",must:!0,submitCount:0,answer:["123","222","1",""]}],opt:[{parId:1,order:0,index:0,content:"aaaaa",count:2},{parId:1,order:0,index:1,content:"aaa",count:2}],nowQueId:0},k=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n={};return Object.keys(e).forEach((function(r){var c=t[r];n[r]=e[r](c,a)})),n}}({que:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Que/Add":var a=0;return e.map((function(e){e.parId===t.parentId&&a++})),a>=10?(y.a.error("\u95ee\u9898\u6700\u591a\u5341\u4e2a"),!1):[].concat(Object(p.a)(e),[{parId:t.parentId,order:a,type:t.queType,question:"",must:!0,submitCount:0,answer:""}]);case"Que/Remove":return e.filter((function(e){return e.parId!==t.parentId||e.order!==t.index}));case"Que/Up":var n=JSON.parse(JSON.stringify(e)),r={},c={};return 0===t.index?(console.log("\u4e0a\u9762\u6ca1\u4e86"),n):(n.forEach((function(e,a){e.parId===t.parentId&&e.order===t.index&&(r=n[a]),e.parId===t.parentId&&e.order===t.index-1&&(c=n[a])})),r.order--,c.order++,n.forEach((function(e){e.parId===t.parentId&&e.order===t.index&&(e=r)})),n.forEach((function(e){e.parId===t.parentId&&e.order===t.index-1&&(e=c)})),n);case"Que/Down":var o=JSON.parse(JSON.stringify(e)),u={},i={};return t.index===o.length-1?(console.log("\u4e0b\u9762\u6ca1\u4e86"),o):(o.forEach((function(e,a){e.parId===t.parentId&&e.order===t.index&&(u=o[a]),e.parId===t.parentId&&e.order===t.index+1&&(i=o[a])})),u.order++,i.order--,o.forEach((function(e){e.parId===t.parentId&&e.order===t.index&&(e=u)})),o.forEach((function(e){e.parId===t.parentId&&e.order===t.index+1&&(e=i)})),o);case"Que/Copy":var l=JSON.parse(JSON.stringify(e)),d={};return 10===l.length?(console.log("\u95ee\u9898\u6700\u591a\u5341\u4e2a"),l):(l.forEach((function(e){e.parId===t.parentId&&e.order===t.index&&(d=e)})),d.order=l.length,l.push(d),l);case"Que/Update":return e.map((function(e){return e.parId===t.id&&e.order===t.index?Object(w.a)({},e,{question:t.content}):e}));case"Que/UpdateWord":return e.map((function(e){return e.parId===t.id&&e.order===t.index?Object(w.a)({},e,{answer:t.answer}):e}));case"Que/Fill":return e.map((function(e){return e.parId===t.id&&e.order===t.index?Object(w.a)({},e,{answer:[].concat(Object(p.a)(e.answer),[t.answer])}):e}));case"Que/JustOrder":return e.map((function(e){return e.parId===t.id&&e.order>t.index?Object(w.a)({},e,{order:e.order-1}):e}));default:return e}},opt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Opt/Add":var a=0;return e.forEach((function(e){e.parId===t.parentId&&e.order===t.parIndex&&a++})),4===a?(y.a.error("\u9009\u9879\u5df2\u6ee1"),e):[].concat(Object(p.a)(e),[{parId:t.parentId,order:t.parIndex,index:a,content:"",answer:""}]);case"Opt/Remove":var n=e.filter((function(e){return e.parId!==t.parentId||e.order!==t.parIndex||e.index!==t.index}));return n.forEach((function(e){e.parId===t.parentId&&e.order===t.parIndex&&e.index>=t.index&&e.index--})),n;case"Opt/AllRemove":var r=e.filter((function(e){return e.parId!==t.parentId||e.order!==t.parIndex}));return r;case"Opt/Up":var c=[],o=[],u=e.filter((function(e){return e.parId===t.parentId&&e.order===t.parIndex?(c.push(e),!1):e.parId!==t.parentId||e.order!==t.parIndex-1||(o.push(e),!1)}));return c.forEach((function(e){e.order--})),o.forEach((function(e){e.order++})),u.push.apply(u,c.concat(o)),u;case"Opt/Down":var i=[],l=[],d=e.filter((function(e){return e.parId===t.parentId&&e.order===t.parIndex?(i.push(e),!1):e.parId!==t.parentId||e.order!==t.parIndex+1||(l.push(e),!1)}));return i.forEach((function(e){e.order++})),l.forEach((function(e){e.order--})),d.push.apply(d,i.concat(l)),d;case"Opt/Update":return e.map((function(e){return e.parId===t.parentId&&e.order===t.parIndex&&e.index===t.index?Object(w.a)({},e,{content:t.content}):e}));case"Opt/Submit":return e.map((function(e){return e.parId===t.parentId&&e.order===t.parIndex&&e.index===t.index?e.count+t.number<0?e:Object(w.a)({},e,{count:e.count+t.number}):e}));case"Opt/Fill":return e.map((function(e){return e.parId===t.id&&e.order===t.order&&e.index===t.index?Object(w.a)({},e,{count:e.count+t.count}):e}));default:return e}},nowQueId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Que/Change":return t.id;default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Que/Save":return e.map((function(e){return e.id===t.id?Object(w.a)({},e,{state:"ready"}):e}));case"Que/Submit":return e.map((function(e){return e.id===t.id?Object(w.a)({},e,{state:"publish"}):e}));case"Item/Remove":return e.filter((function(e){return e.id!==t.id}));case"Item/New":return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(p.a)(e),[{id:t.id,state:"done",name:t.title,deadline:t.deadline,submit:0}]);case"Data/UpdateTime":return e.map((function(e){return e.id===t.id?Object(w.a)({},e,{state:t.nowState}):e}));case"DataCount/Add":return e.map((function(e){return e.id===t.id?Object(w.a)({},e,{submit:e.submit+1}):e}));default:return e}}}),j=Object(n.createContext)({});var Q=function(e){var t=Object(n.useReducer)(k,C),a=Object(d.a)(t,2),c=a[0],o=a[1];return r.a.createElement(j.Provider,{value:{state:c,dispatch:o}},e.children)},N=function(e){Object(s.a)(e);var t=Object(n.useContext)(j),a=t.state,c=t.dispatch,o=Object(n.useState)(0),u=Object(d.a)(o,2),i=u[0],l=u[1],p=Object(n.useState)([]),w=Object(d.a)(p,2),g=w[0],O=w[1],x=a.data;return Object(n.useEffect)((function(){x.forEach((function(e){var t;t=e.deadline,(new Date).getTime()<=Date.parse(t)||"done"===e.state||c({type:"Data/UpdateTime",id:e.id,nowState:"done"})}))})),r.a.createElement("section",{className:"list"},r.a.createElement("h1",null,"\u95ee\u5377\u5217\u8868"),r.a.createElement(b.a,{itemLayout:"vertical",dataSource:x,header:r.a.createElement(m.a,null,r.a.createElement(f.a,{span:4},"\u9009\u4e2d"),r.a.createElement(f.a,{span:6},"\u95ee\u5377\u540d\u79f0"),r.a.createElement(f.a,{span:6},"\u95ee\u5377\u72b6\u6001"),r.a.createElement(f.a,{span:8},"\u529f\u80fd\u533a\u57df")),footer:r.a.createElement(m.a,null,r.a.createElement(f.a,{span:4},r.a.createElement(h.a,{indeterminate:!!i&&i<x.length,checked:x.length===i,onChange:function(e){y.a.warn("\u529f\u80fd\u672a\u6dfb\u52a0")}},"all")),r.a.createElement(f.a,{span:6}),r.a.createElement(f.a,{span:6}),r.a.createElement(f.a,{span:8},r.a.createElement(E.a,{onClick:function(){g.forEach((function(e){return c({type:"Item/Remove",id:e})})),l(i-g.length)}},"\u5220\u9664"),r.a.createElement(E.a,{onClick:function(){c(I()),window.location.hash="/create"}},"\u65b0\u5efa"))),renderItem:function(e){return r.a.createElement(b.a.Item,null,r.a.createElement(v,{key:e.id,id:e.id,state:e.state,name:e.name,editQue:function(){c({type:"Que/Change",id:e.id}),window.location.hash="/create"},scanData:function(){c({type:"Que/Change",id:e.id}),window.location.hash="/data"},fillQue:function(){c({type:"Que/Change",id:e.id}),window.location.hash="/fill"},checked:i,changeChecked:l,list:g,changeList:O}))}}))},S=(a(272),a(317)),q=a(315),D=function(e){var t=e.index,a=e.removeOpt,n=e.type,c=e.updateOpt,o=e.content;switch(n){case"single":return r.a.createElement("div",null,r.a.createElement(S.a,{value:t},r.a.createElement(q.a,{placeholder:"\u9009\u9879\u5185\u5bb9",defaultValue:o,onChange:c}),r.a.createElement(E.a,{onClick:a},"X")));case"multi":return r.a.createElement("div",{className:"checkbox"},r.a.createElement(h.a,null),r.a.createElement(q.a,{placeholder:"\u9009\u9879\u5185\u5bb9",className:"checkboxInput",defaultValue:o,onChange:c}),r.a.createElement(E.a,{onClick:a},"X"));default:return r.a.createElement("div",null)}},T=function(e,t){return{type:"Que/Add",queType:e,parentId:t}},J=function(e,t){return{type:"Que/Remove",index:e,parentId:t}},R=function(e,t){return{type:"Que/Up",index:e,parentId:t}},A=function(e,t){return{type:"Que/Down",index:e,parentId:t}},U=function(e,t){return{type:"Que/Copy",index:e,parentId:t}},L=function(e,t){return{type:"Opt/Add",parIndex:e,parentId:t}},B=function(e,t,a){return{type:"Opt/Remove",parIndex:e,parentId:t,index:a}},V=function(e,t){return{type:"Opt/AllRemove",parIndex:e,parentId:t}},M=function(e,t,a,n){return{type:"Opt/Update",parIndex:e,parentId:t,index:a,content:n}},F=function(e,t,a){return{type:"Que/Update",id:e,index:t,content:a}},W=function(e,t,a){return{type:"Item/New",id:e,title:t,deadline:a}},G=a(164),P=a.n(G),X=function(e){var t=e.bool,a=e.addOpt,n=e.removeQue;e.upQue,e.downQue,e.copyQue;return r.a.createElement("div",{className:"controller"},t?r.a.createElement(E.a,{onClick:a},"\u6dfb\u52a0\u9009\u9879"):null,r.a.createElement(E.a,{onClick:function(){return y.a.warn("\u529f\u80fd\u672a\u6dfb\u52a0")}},"\u9898\u76ee\u4e0a\u79fb"),r.a.createElement(E.a,{onClick:function(){return y.a.warn("\u529f\u80fd\u672a\u6dfb\u52a0")}},"\u9898\u76ee\u4e0b\u79fb"),r.a.createElement(E.a,{onClick:function(){return y.a.warn("\u529f\u80fd\u672a\u6dfb\u52a0")}},"\u9898\u76ee\u590d\u7528"),r.a.createElement(E.a,{onClick:n},"\u9898\u76ee\u5220\u9664"))},z=function(e,t,a){return e.filter((function(e){return e.parId===t&&e.order===a}))},H=function(e){var t=e.index,a=e.item,c=Object(n.useContext)(j),o=c.state,u=c.dispatch,i=o.opt;switch(a.type){case"single":return r.a.createElement("div",{"data-id":"single",className:"que"},r.a.createElement("p",null,"Q",t+1,"\u5355\u9009\u9898"),r.a.createElement(q.a,{type:"text",placeholder:"\u9898\u76ee\u5185\u5bb9",defaultValue:a.question,onChange:function(e){return u(F(a.parId,t,e.target.value))}}),z(i,a.parId,t).map((function(e,n){return r.a.createElement(D,{index:n,key:e.parId+n,type:a.type,content:e.content,removeOpt:function(){return u(B(e.order,e.parId,n))},updateOpt:function(e){return u(M(t,a.parId,n,e.target.value))}})})),r.a.createElement(X,{bool:!0,addOpt:function(){return u(L(t,a.parId))},removeQue:function(){u(J(t,a.parId)),u(V(t,a.parId))},upQue:function(){return u(R(t,a.parId))},downQue:function(){return u(A(t,a.parId))},copyQue:function(){return u(U(t,a.parId))}}));case"multi":return r.a.createElement("div",{"data-id":"multi",className:"que"},r.a.createElement("p",null,"Q",t+1,"\u591a\u9009\u9898"),r.a.createElement(q.a,{type:"text",placeholder:"\u9898\u76ee\u5185\u5bb9",defaultValue:a.question,onChange:function(e){return u(F(a.parId,t,e.target.value))}}),z(i,a.parId,t).map((function(e,n){return r.a.createElement(D,{index:n,key:e.parId+n,type:a.type,content:e.content,removeOpt:function(){return u(B(e.order,e.parId,n))},updateOpt:function(e){return u(M(t,a.parId,n,e.target.value))}})})),r.a.createElement(X,{bool:!0,addOpt:function(){return u(L(t,a.parId))},removeQue:function(){u(J(t,a.parId)),u(V(t,a.parId))},upQue:function(){return u(R(t,a.parId))},downQue:function(){return u(A(t,a.parId))},copyQue:function(){return u(U(t,a.parId))}}));case"word":return r.a.createElement("div",{"data-id":"word",className:"que"},r.a.createElement("p",null,"Q",t+1,"\u6587\u5b57\u9898"),r.a.createElement(q.a,{type:"text",placeholder:"\u9898\u76ee\u5185\u5bb9",defaultValue:a.question,onChange:function(e){return u(F(a.parId,t,e.target.value))}}),r.a.createElement(P.a,{name:"",id:"",cols:30,rows:10,placeholder:"\u56de\u7b54\u5185\u5bb9"}),r.a.createElement(X,{bool:!1,addOpt:function(){return u(L(t,a.parId))},removeQue:function(){return u(J(t,a.parId))},upQue:function(){return u(R(t,a.parId))},downQue:function(){return u(A(t,a.parId))},copyQue:function(){return u(U(t,a.parId))}}));default:return r.a.createElement("div",null)}},$=a(312),K=function(e,t){var a=[];return e.forEach((function(e){null!==t&&e.parId===t&&a.push(e)})),a.sort((function(e,t){return e.order-t.order})),a},Y=function(e){Object(s.a)(e);var t=Object(n.useContext)(j),a=t.state,c=t.dispatch,o=a.data,u=a.que,i=a.nowQueId,l=Object(n.useState)(""),p=Object(d.a)(l,2),m=p[0],f=p[1],h=Object(n.useState)(""),v=Object(d.a)(h,2),w=v[0],g=v[1];return 0!==i&&function(e,t){var a=!0;return e.forEach((function(e){null!==t&&e.id===t&&(a="ready"===e.state)})),a}(o,i)?r.a.createElement("div",{className:"create2"},r.a.createElement("div",{className:"create2-1"},r.a.createElement("div",{className:"create-title"},r.a.createElement(q.a,{type:"text",placeholder:"\u95ee\u5377\u6807\u9898",onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",{className:"queAll"},r.a.createElement(b.a,{itemLayout:"vertical",dataSource:K(u,i),renderItem:function(e,t){return r.a.createElement(b.a.Item,null,r.a.createElement(H,{key:e.parId,index:t,item:e}))}})),r.a.createElement("div",{className:"create-add"},r.a.createElement(E.a,{onClick:function(){return c(T("single",i))}},"\u5355\u9009\u9898"),r.a.createElement(E.a,{onClick:function(){return c(T("multi",i))}},"\u591a\u9009\u9898"),r.a.createElement(E.a,{onClick:function(){return c(T("word",i))}},"\u6587\u5b57\u9898")),r.a.createElement("div",{className:"create-foot"},r.a.createElement("p",null,"\u95ee\u5377\u622a\u6b62\u65f6\u95f4\uff1a",r.a.createElement($.a,{onChange:function(e,t){return g(t)}})),r.a.createElement(E.a,{onClick:function(){var e=(new Date).getTime();w?e<Date.parse(w)?(c(W(i,m,w)),c({type:"Que/Save",id:i}),window.location.hash="/list",c({type:"Que/Change",id:0}),y.a.success("\u4fdd\u5b58\u6210\u529f")):y.a.error("\u622a\u6b62\u65f6\u95f4\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4"):y.a.error("\u5fc5\u586b\u9879\u7a7a\u7f3a")}},"\u4fdd\u5b58\u95ee\u5377"),r.a.createElement(E.a,{onClick:function(){var e=(new Date).getTime();w?e<Date.parse(w)?(c(W(i,m,w)),c({type:"Que/Submit",id:i}),window.location.hash="/list",c({type:"Que/Change",id:0}),y.a.success("\u4fdd\u5b58\u6210\u529f")):y.a.error("\u622a\u6b62\u65f6\u95f4\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4"):y.a.error("\u5fc5\u586b\u9879\u7a7a\u7f3a")}},"\u53d1\u5e03\u95ee\u5377")))):r.a.createElement("div",{className:"create1"},r.a.createElement("div",{className:"create1-1"},r.a.createElement("p",null,"\u70b9\u51fb\u6309\u94ae\u65b0\u5efa\u95ee\u5377"),r.a.createElement(E.a,{onClick:function(){return c(I())}},"\u65b0\u5efa\u95ee\u5377")))},Z=a(167),_=a(98),ee=a.n(_),te=function(e,t,a){return e.filter((function(e){return e.parId===t&&e.order===a}))},ae=function(e){var t=e.item,a=e.getData,c=e.index,o=e.mustCheck,u=Object(n.useContext)(j),i=u.state,l=(u.dispatch,i.opt),s=Object(n.useState)(0),m=Object(d.a)(s,2),f=m[0],E=(m[1],Object(n.useState)([])),v=Object(d.a)(E,2),I=v[0],b=v[1],y=Object(n.useState)([]),w=Object(d.a)(y,2),g=(w[0],w[1]),O=Object(n.useState)([]),x=Object(d.a)(O,2),C=x[0],k=x[1],Q=function(e,t,n,r){if("publish"===n)return function(n){var c,o={parId:t,order:e,index:+(null===n||void 0===n?void 0:n.target).value-1,count:1};if(r){var u=I.findIndex((function(a){return a.parId===t&&a.order===e&&a.index===+(null===n||void 0===n?void 0:n.target).value-1}));c=Object(p.a)(I),-1!==u?(c[u]=o,b(c)):(c.push(o),b(c)),a(c)}else a(c=[o]);if(-1===C.findIndex((function(a){return a.parId===t&&a.order===e}))){var i=Object(p.a)(C);i.push({parId:t,order:e}),k(i)}console.log(c)}};switch(t.type){case"single":return r.a.createElement("div",{"data-id":"single"},r.a.createElement("p",null,"Q",t.order+1,"\u5355\u9009\u9898"),r.a.createElement("p",null,t.question||"\u672a\u586b\u5199\u95ee\u9898"),r.a.createElement(ee.a.Group,{defaultValue:f,onChange:Q(c,t.parId,"publish",!1)},te(l,t.parId,t.order).map((function(e,t){return r.a.createElement(ee.a,{key:e.parId+e.index+t+1,value:t+1},e.content)}))));case"multi":return r.a.createElement("div",{"data-id":"multi"},r.a.createElement("p",null,"Q",t.order+1,"\u591a\u9009\u9898"),r.a.createElement("p",null,t.question||"\u672a\u586b\u5199\u95ee\u9898"),r.a.createElement(ee.a.Group,{defaultValue:f},te(l,t.parId,t.order).map((function(e,t){return r.a.createElement(h.a,{key:e.parId+e.index+t+1,value:t+1,onChange:Q(c,e.parId,"publish",!0)},e.content)}))));case"word":return r.a.createElement("div",{"data-id":"word"},r.a.createElement("p",null,"Q",t.order+1,"\u6587\u5b57\u9898"),r.a.createElement("p",null,t.question),r.a.createElement("span",null,t.must?"\u6b64\u9879\u5fc5\u586b":"\u6b64\u9879\u9009\u586b"),r.a.createElement(q.a.TextArea,{name:"",id:"",cols:30,rows:10,placeholder:"\u56de\u7b54\u5185\u5bb9",onChange:function(e,t,n,r){if("publish"===n)return function(n){if(r&&!(null===n||void 0===n?void 0:n.target).value)console.log("\u6b64\u9898\u5fc5\u586b"),o(!1);else{var c={parId:e,order:t,type:"word",answer:(null===n||void 0===n?void 0:n.target).value};g([c]),a([c])}}}(t.parId,c,"publish",t.must)}));default:return r.a.createElement("div",null)}},ne=(a(302),function(e,t){var a=[];return e.forEach((function(e){null!==t&&e.parId===t&&a.push(e)})),a.sort((function(e,t){return e.order-t.order})),a}),re=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch,c=t.data,o=t.que,u=t.nowQueId,i=function(e,t){var a={};return e.forEach((function(e){e.id===t&&(a=e)})),a}(c,u),l=Object(n.useState)([]),s=Object(d.a)(l,2),m=s[0],f=s[1],h=Object(n.useState)([]),E=Object(d.a)(h,2),v=E[0],I=E[1],w=Object(n.useState)(!0),g=Object(d.a)(w,2),O=g[0],x=g[1],C=function(e){x(e)};return 0!==u&&function(e,t){var a=!0;return e.forEach((function(e){null!==t&&e.id===t&&(a="done"!==e.state)})),a}(c,u)?r.a.createElement("div",{className:"fill"},r.a.createElement("div",{className:"fill-1"},r.a.createElement("p",{className:"fill-title"},i.name||"\u672a\u586b\u5199"),r.a.createElement(b.a,{className:"queFill",itemLayout:"vertical",dataSource:ne(o,u),renderItem:function(e,t){return r.a.createElement(b.a.Item,null,r.a.createElement(ae,{item:e,getData:function(e){var t,a=Object(p.a)(v),n=Object(p.a)(m),r=Object(Z.a)(e);try{var c=function(){var e=t.value;if(e.type){var r=n.findIndex((function(t){return t.parId===e.parId&&t.order===e.order}));-1!==r?n[r]=e:n.push(e)}else a=[e]};for(r.s();!(t=r.n()).done;)c()}catch(o){r.e(o)}finally{r.f()}I(a),f(n)},index:t,mustCheck:C}))}}),r.a.createElement("div",{className:"fill-foot"},r.a.createElement(q.a,{type:"button",value:"\u63d0\u4ea4\u95ee\u5377",onClick:function(){return function(e,t,n,r,c){e.forEach((function(e){e.id===t&&("publish"===e.state?c?(a({type:"Que/Change",id:null}),n.forEach((function(e){a(function(e,t,a){return{type:"Que/Fill",id:e,index:t,answer:a}}(e.parId,e.order,e.answer))})),a(function(e){return{type:"DataCount/Add",id:e}}(t)),r.forEach((function(e){a(function(e,t,a,n){return{type:"Opt/Fill",id:e,order:t,index:a,count:n}}(e.parId,e.order,e.index,e.count))})),y.a.success("\u63d0\u4ea4\u6210\u529f")):y.a.error("\u95ee\u5377\u5fc5\u586b\u5185\u5bb9\u7a7a\u7f3a\uff0c\u63d0\u4ea4\u65e0\u6548"):y.a.error("\u95ee\u5377\u4e0d\u4e3a\u53d1\u5e03\u72b6\u6001\uff0c\u63d0\u4ea4\u65e0\u6548"))})),window.location.hash="/list"}(c,u,m,v,O)}}),r.a.createElement(q.a,{type:"button",value:"\u8fd4\u56de\u5217\u8868",onClick:function(){a({type:"Que/Change",id:0}),window.location.hash="/list"}})))):r.a.createElement("div",{className:"fill"},r.a.createElement("div",{className:"fill-1"},"\u8bf7\u9009\u62e9\u8981\u586b\u5199\u7684\u95ee\u5377"))},ce=a(168),oe=a(169),ue=a(176),ie=a(173),le=function(e){Object(ue.a)(a,e);var t=Object(ie.a)(a);function a(e){return Object(ce.a)(this,a),t.call(this,e)}return Object(oe.a)(a,[{key:"drawLine",value:function(e,t,a,n,r){e.beginPath(),e.moveTo(t,a),e.lineTo(n,r),e.strokeStyle="black",e.stroke()}},{key:"drawMarker",value:function(e,t){if(t){var a=500/(+Object.keys(t).length+1),n=1;for(var r in t)e.fillText(r,a*n+50,290,50),n++}else e.fillText("100%",10,50,40),e.fillText("75%",10,105,40),e.fillText("50%",10,160,40),e.fillText("25%",10,215,40),e.fillText("0",20,270,40)}},{key:"drawRect",value:function(e,t,a){var n=500/(+Object.keys(t).length+1),r=1;for(var c in t)e.fillStyle="#1890ff",e.fillRect(n*r+25,50+220*(1-t[c]/a),50,220*t[c]/a),r++}},{key:"render",value:function(){return r.a.createElement("canvas",{id:this.props.que.parId+"-"+this.props.que.order})}},{key:"componentDidMount",value:function(){var e=document.getElementById(this.props.que.parId+"-"+this.props.que.order),t=e.getContext("2d");if(e.width=600,e.height=300,this.drawLine(t,50,50,50,270),this.drawLine(t,50,270,550,270),this.drawMarker(t,null),"word"===this.props.type){var a={answer:this.props.que.answer.length};this.drawMarker(t,a),this.drawRect(t,a,this.props.count)}else{var n={};this.props.opt.forEach((function(e){n[e.index+1]=e.count})),this.drawMarker(t,n),this.drawRect(t,n,this.props.count)}}}]),a}(n.Component),de=function(e){var t=e.item,a=e.index,n=e.count,c=e.opt;return r.a.createElement("div",null,r.a.createElement("p",null,"Q",a+1,"single"==t.type?"\u5355\u9009\u9898":"multi"==t.type?"\u591a\u9009\u9898":"\u6587\u5b57\u9898"),r.a.createElement("p",null,"\u8be5\u95ee\u9898\u603b\u63d0\u4ea4\u6b21\u6570\u4e3a",n,"\u6b21"),r.a.createElement(le,{type:t.type,opt:function(e,t,a){var n=[];return e.forEach((function(e){e.parId===t&&e.order===a&&n.push(e)})),n}(c,t.parId,t.order),que:t,count:n}))},se=(a(303),function(){var e=Object(n.useContext)(j),t=e.state,a=(e.dispatch,t.data),c=t.que,o=t.opt,u=t.nowQueId;var i=function(e,t){var a={};return e.forEach((function(e){e.id===t&&(a=e)})),a}(a,u);return 0===u||"{}"===JSON.stringify(i)?r.a.createElement("div",{className:"data"},r.a.createElement("div",{className:"data-1"},"\u8bf7\u9009\u62e9\u8981\u67e5\u770b\u6570\u636e\u7684\u9875\u9762")):r.a.createElement("div",{className:"data"},r.a.createElement("div",{className:"data-1"},r.a.createElement("div",{className:"data-title"},r.a.createElement("p",null,i.name||"\u672a\u586b\u5199"),r.a.createElement("span",null,"\u95ee\u5377\u603b\u63d0\u4ea4\u6b21\u6570\uff1a",i.submit," \u622a\u6b62\u65e5\u671f\uff1a",i.deadline||"\u672a\u586b\u5199")),r.a.createElement("div",{className:"queData"},function(e,t){var a=[];return t.forEach((function(t){t.parId===e&&a.push(t)})),a.sort((function(e,t){return e.order-t.order})),a}(u,c).map((function(e,t){return r.a.createElement(de,{key:u+"data"+t,item:e,index:t,count:i.submit,opt:o})}))),r.a.createElement("div",{className:"data-foot"},r.a.createElement("input",{type:"button",value:"\u8fd4\u56de",onClick:function(){window.location.hash="/list"}}))))}),pe=a(170),me=a(48),fe=a(311),he=function(){var e=Object(n.useContext)(j),t=e.state;e.dispatch;return Object(n.useEffect)((function(){return localStorage.setItem("questionnaire-state",JSON.stringify(t)),function(){localStorage.setItem("questionnaire-state",JSON.stringify(t))}})),r.a.createElement(fe.a,{className:"layout"},r.a.createElement(fe.a.Header,{className:"header"},"Questionnaire",r.a.createElement(i,null)),r.a.createElement(fe.a.Content,{className:"content"},r.a.createElement(pe.a,null,r.a.createElement(me.a,{path:"/",component:l,exact:!0}),r.a.createElement(me.a,{path:"/home",component:l}),r.a.createElement(me.a,{path:"/create",component:Y}),r.a.createElement(me.a,{path:"/list",component:N}),r.a.createElement(me.a,{path:"/fill",component:re}),r.a.createElement(me.a,{path:"/data",component:se}))))};o.a.render(r.a.createElement(Q,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[177,1,2]]]);
//# sourceMappingURL=main.100fd79a.chunk.js.map